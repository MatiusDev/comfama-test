{"ast":null,"code":"import _slicedToArray from\"/root/Documents/Workspaces/tests/comfama/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState}from'react';import{searchAnime}from'../services/anime';import'../styles/Search.css';import{getAnimeRecommendations}from'../services/animeRecommendation';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Search=function Search(_ref){var toggleSearch=_ref.toggleSearch;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),query=_useState2[0],setQuery=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),search=_useState4[0],setSearch=_useState4[1];var handleEnter=function handleEnter(evt){if(evt.key==='Enter'){if(query!==''){searchAnime({query:query.toLowerCase()}).then(function(data){if(data){getAnimeRecommendations({animes:data}).then(function(recommendedAnimes){setSearch(recommendedAnimes);toggleSearch(true);});}});}}};var handleCancel=function handleCancel(){setSearch([]);setQuery('');toggleSearch(false);};var cancelDisplay=query!==''&&search.length>0?'block':'none';return/*#__PURE__*/_jsxs(\"div\",{className:\"search\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"search__input\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Buscar un anime...\",value:query,onChange:function onChange(evt){return setQuery(evt.target.value);},onKeyPress:handleEnter}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCancel,style:{display:cancelDisplay},type:\"button\",children:\"X\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"search__listitems\",children:search.map(function(el){return/*#__PURE__*/_jsxs(\"div\",{className:\"search__item\",children:[/*#__PURE__*/_jsx(\"img\",{src:el.image_url,alt:el.title}),/*#__PURE__*/_jsx(\"div\",{className:\"search__item-content\",children:/*#__PURE__*/_jsx(\"h3\",{children:el.title})}),/*#__PURE__*/_jsx(\"div\",{className:\"search__item-recommendation\",children:/*#__PURE__*/_jsx(\"h3\",{children:el.recommendation})})]},el.mal_id);})})]});};export default Search;","map":{"version":3,"sources":["/root/Documents/Workspaces/tests/comfama/app/src/components/Search.jsx"],"names":["useState","searchAnime","getAnimeRecommendations","Search","toggleSearch","query","setQuery","search","setSearch","handleEnter","evt","key","toLowerCase","then","data","animes","recommendedAnimes","handleCancel","cancelDisplay","length","target","value","display","map","el","image_url","title","recommendation","mal_id"],"mappings":"+JAAA,OAASA,QAAT,KAAyB,OAAzB,CAGA,OAASC,WAAT,KAA4B,mBAA5B,CAEA,MAAO,sBAAP,CACA,OAASC,uBAAT,KAAwC,iCAAxC,C,wFAEA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,MAAsB,IAAnBC,CAAAA,YAAmB,MAAnBA,YAAmB,CACnC,cAA0BJ,QAAQ,CAAC,EAAD,CAAlC,wCAAOK,KAAP,eAAcC,QAAd,eACA,eAA4BN,QAAQ,CAAC,EAAD,CAApC,yCAAOO,MAAP,eAAeC,SAAf,eAEA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,GAAD,CAAS,CAC3B,GAAIA,GAAG,CAACC,GAAJ,GAAY,OAAhB,CAAyB,CACvB,GAAIN,KAAK,GAAK,EAAd,CAAkB,CAChBJ,WAAW,CAAC,CAAEI,KAAK,CAAEA,KAAK,CAACO,WAAN,EAAT,CAAD,CAAX,CACGC,IADH,CACQ,SAACC,IAAD,CAAU,CACd,GAAIA,IAAJ,CAAU,CACRZ,uBAAuB,CAAC,CAAEa,MAAM,CAAED,IAAV,CAAD,CAAvB,CACGD,IADH,CACQ,SAACG,iBAAD,CAAuB,CAC3BR,SAAS,CAACQ,iBAAD,CAAT,CACAZ,YAAY,CAAC,IAAD,CAAZ,CACD,CAJH,EAKD,CACF,CATH,EAUD,CACF,CACF,CAfD,CAiBA,GAAMa,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CACzBT,SAAS,CAAC,EAAD,CAAT,CACAF,QAAQ,CAAC,EAAD,CAAR,CACAF,YAAY,CAAC,KAAD,CAAZ,CACD,CAJD,CAMA,GAAMc,CAAAA,aAAa,CAAGb,KAAK,GAAK,EAAV,EAAgBE,MAAM,CAACY,MAAP,CAAgB,CAAhC,CAAoC,OAApC,CAA8C,MAApE,CACA,mBACE,aAAK,SAAS,CAAC,QAAf,wBACE,aAAK,SAAS,CAAC,eAAf,wBACE,cACE,IAAI,CAAC,MADP,CAEE,WAAW,CAAC,oBAFd,CAGE,KAAK,CAAEd,KAHT,CAIE,QAAQ,CAAE,kBAACK,GAAD,QAASJ,CAAAA,QAAQ,CAACI,GAAG,CAACU,MAAJ,CAAWC,KAAZ,CAAjB,EAJZ,CAKE,UAAU,CAAEZ,WALd,EADF,cAQE,eAAQ,OAAO,CAAEQ,YAAjB,CAA+B,KAAK,CAAE,CAAEK,OAAO,CAAEJ,aAAX,CAAtC,CAAkE,IAAI,CAAC,QAAvE,eARF,GADF,cAYE,YAAK,SAAS,CAAC,mBAAf,UAEIX,MAAM,CAACgB,GAAP,CAAW,SAACC,EAAD,qBACT,aAAqB,SAAS,CAAC,cAA/B,wBACE,YAAK,GAAG,CAAEA,EAAE,CAACC,SAAb,CAAwB,GAAG,CAAED,EAAE,CAACE,KAAhC,EADF,cAEE,YAAK,SAAS,CAAC,sBAAf,uBACE,oBAAKF,EAAE,CAACE,KAAR,EADF,EAFF,cAKE,YAAK,SAAS,CAAC,6BAAf,uBACE,oBAAKF,EAAE,CAACG,cAAR,EADF,EALF,GAAUH,EAAE,CAACI,MAAb,CADS,EAAX,CAFJ,EAZF,GADF,CA8BD,CA1DD,CAgEA,cAAezB,CAAAA,MAAf","sourcesContent":["import { useState } from 'react';\nimport PropTypes from 'prop-types';\n\nimport { searchAnime } from '../services/anime';\n\nimport '../styles/Search.css';\nimport { getAnimeRecommendations } from '../services/animeRecommendation';\n\nconst Search = ({ toggleSearch }) => {\n  const [query, setQuery] = useState('');\n  const [search, setSearch] = useState([]);\n\n  const handleEnter = (evt) => {\n    if (evt.key === 'Enter') {\n      if (query !== '') {\n        searchAnime({ query: query.toLowerCase() })\n          .then((data) => {\n            if (data) {\n              getAnimeRecommendations({ animes: data })\n                .then((recommendedAnimes) => {\n                  setSearch(recommendedAnimes);\n                  toggleSearch(true);\n                });\n            }\n          });\n      }\n    }\n  };\n\n  const handleCancel = () => {\n    setSearch([]);\n    setQuery('');\n    toggleSearch(false);\n  };\n\n  const cancelDisplay = query !== '' && search.length > 0 ? 'block' : 'none';\n  return (\n    <div className=\"search\">\n      <div className=\"search__input\">\n        <input\n          type=\"text\"\n          placeholder=\"Buscar un anime...\"\n          value={query}\n          onChange={(evt) => setQuery(evt.target.value)}\n          onKeyPress={handleEnter}\n        />\n        <button onClick={handleCancel} style={{ display: cancelDisplay }} type=\"button\">X</button>\n      </div>\n\n      <div className=\"search__listitems\">\n        {\n          search.map((el) => (\n            <div key={el.mal_id} className=\"search__item\">\n              <img src={el.image_url} alt={el.title} />\n              <div className=\"search__item-content\">\n                <h3>{el.title}</h3>\n              </div>\n              <div className=\"search__item-recommendation\">\n                <h3>{el.recommendation}</h3>\n              </div>\n            </div>\n          ))\n        }\n      </div>\n    </div>\n  );\n};\n\nSearch.propTypes = {\n  toggleSearch: PropTypes.func.isRequired,\n};\n\nexport default Search;\n"]},"metadata":{},"sourceType":"module"}